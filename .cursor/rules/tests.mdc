---
name: tests
description: Rules for writing and modifying tests
globs: ["**/*.spec.{ts,tsx,vue}", "**/*.test.{ts,tsx,vue}", "test/**", "e2e/**"]
alwaysApply: false
---

- Structure: `test/` for infrastructure (setup, utils, mocks) and E2E; colocate unit/component specs next to source in `src/`
- Imports: `@test/utils`, `@test/setup` for helpers and setup
- Unit: Zod schemas, primitives, pure functions — specs next to source
- Component: mountWithProviders from `@test/utils`, createTestingPinia, vi.mock for API/toast
- E2E: `test/e2e/`, page.route() for API mock; selectors: getByLabel(), getByRole() — TheInput/TheSelect/TheCheckbox pass label as aria-label; for validation tests use blur (focus adjacent field), not click on disabled button
- Mocks: toast and ResizeObserver/IntersectionObserver in setup; API in test or `test/mocks`
- See [docs/guide-testing.md](../docs/guide-testing.md)
